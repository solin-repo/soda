<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class model</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class model</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
							<a href="#sec-descendents">Descendents</a>
			|											<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">A model object usually corresponds to exactly one database record. All columns  are made available as object properties pointing to their corresponding database values (if any).</p>
<p class="description"><p>In addition, a number of methods are available which allow you to perform standard database actions.  For instance, you can invoke the 'save' method on a Soda model object.  A model class is also the place where you specify &quot;business logic&quot;, including validation rules.</p></p>
		<p class="notes">
			Located in <a class="field" href="_class.model.php.html">/class.model.php</a> (line <span class="field"><a href="../__filesource/fsource_Soda__class.model.php.html#a42">42</a></span>)
		</p>
		
				
		<pre></pre>
	
			</div>
</div>

	<a name="sec-descendents"></a>
	<div class="info-box">
		<div class="info-box-title">Direct descendents</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
			<span class="disabled">Descendents</span>
			|												<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
								|															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<table cellpadding="2" cellspacing="0" class="class-table">
				<tr>
					<th class="class-table-header">Class</th>
					<th class="class-table-header">Description</th>
				</tr>
								<tr>
					<td style="padding-right: 2em"><a href="../Soda/user.html">user</a></td>
					<td>
											A model object usually corresponds to exactly one database record. All columns  are made available as object properties pointing to their corresponding database values (if any).
										</td>
				</tr>
							</table>
		</div>
	</div>


	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<div class="var-summary">
												<div class="var-title">
					static <span class="var-type">mixed</span>
					<a href="#$directives" title="details" class="var-name">$directives</a>
				</div>
																<div class="var-title">
					static <span class="var-type">mixed</span>
					<a href="#$finder_signatures" title="details" class="var-name">$finder_signatures</a>
				</div>
																<div class="var-title">
					static <span class="var-type">mixed</span>
					<a href="#$has_many" title="details" class="var-name">$has_many</a>
				</div>
																<div class="var-title">
					static <span class="var-type">mixed</span>
					<a href="#$plural" title="details" class="var-name">$plural</a>
				</div>
																<div class="var-title">
					static <span class="var-type">mixed</span>
					<a href="#$table_relations" title="details" class="var-name">$table_relations</a>
				</div>
																																																																				<div class="var-title">
					<span class="var-type">mixed</span>
					<a href="#$validation_rules" title="details" class="var-name">$validation_rules</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
																		<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																				<div class="method-definition">
					static 						<span class="method-result">object Returns</span>
										<a href="#load" title="details" class="method-name">load</a>
											([<span class="var-type">string</span>&nbsp;<span class="var-name">$where_clause</span> = <span class="var-default">false</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$include</span> = <span class="var-default">false</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">null</span>])
									</div>
																<div class="method-definition">
					static 						<span class="method-result">array</span>
										<a href="#load_associations" title="details" class="method-name">load_associations</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$objects</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$associations</span>)
									</div>
								
												<div class="method-definition">
											<span class="method-result">object</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$properties</span>)
									</div>
																								</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			<a name="var$directives" id="$directives"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<span class="var-title">
			static <span class="var-type">mixed</span>
			<span class="var-name">$directives</span>
			 = <span class="var-default">array(<br />        'scope',<br />        'through'<br />    )</span>			(line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a55">55</a></span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
<a name="var$finder_signatures" id="$finder_signatures"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			static <span class="var-type">mixed</span>
			<span class="var-name">$finder_signatures</span>
			 = <span class="var-default">array(<br />        'find_all',<br />        'find',<br />        'load_all',<br />        'load',<br />        'delete_all'<br />    )</span>			(line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a47">47</a></span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
<a name="var$has_many" id="$has_many"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<span class="var-title">
			static <span class="var-type">mixed</span>
			<span class="var-name">$has_many</span>
			 = <span class="var-default"> false</span>			(line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a46">46</a></span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
<a name="var$plural" id="$plural"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			static <span class="var-type">mixed</span>
			<span class="var-name">$plural</span>
			 = <span class="var-default"> false</span>			(line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a45">45</a></span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
<a name="var$table_relations" id="$table_relations"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<span class="var-title">
			static <span class="var-type">mixed</span>
			<span class="var-name">$table_relations</span>
			 = <span class="var-default"> false</span>			(line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a59">59</a></span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
<a name="var$validation_rules" id="$validation_rules"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$validation_rules</span>
			 = <span class="var-default">array()</span>			(line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a44">44</a></span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
																	<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodload" id="load"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">static method load</span> (line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a109">109</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Loads the first object of the table specified in model::$table_name.</p>
<p class="description"><p>For example, if your model looks like this:  <div class="src-code"><ol><li><div class="src-line">&nbsp;<span class="src-key">class&nbsp;</span><a href="../Soda/user.html">user</a>&nbsp;<span class="src-key">extends&nbsp;</span><a href="../Soda/model.html">model</a>&nbsp;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$table_name&nbsp;</span>=&nbsp;<span class="src-str">'user'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;<span class="src-sym">}</span></div></li>
</ol></div></p><p>then calling $first_user = user::load() will simply return the first user in the database as a Soda model object.</p><p>This method uses an optional array of class names to load associated objects.</p><p>Example: $author = author::load(false, $include = array('book'));</p><p>You can also specify nested relations:</p><p>$publisher = publisher::load(false, $include = array('author' =&gt; 'book'));</p><p>This will load all authors and their books as an object hierarchy:</p><p><div class="src-code"><ol><li><div class="src-line">&nbsp;<span class="src-var">$first_author&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_shift">array_shift</a><span class="src-sym">(</span><span class="src-var">$publisher</span><span class="src-sym">-&gt;</span><span class="src-id">authors</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;<span class="src-var">$books_for_first_author&nbsp;</span>=&nbsp;<span class="src-var">$first_author</span><span class="src-sym">-&gt;</span><span class="src-id">books</span><span class="src-sym">;</span></div></li>
</ol></div></p><p>Please note that there's also a 'plural' version of this function: model::load_all.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> object or null if no object was found or false upon error</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">object Returns</span>
		<span class="method-name">
			load
		</span>
					([<span class="var-type">string</span>&nbsp;<span class="var-name">$where_clause</span> = <span class="var-default">false</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$include</span> = <span class="var-default">false</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$where_clause</span><span class="var-description">: SQL where clause: use without the WHERE keyword (optional)</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$include</span><span class="var-description">: class names of associated models to include (optional)</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: Array of sql parameters (optional)</span>			</li>
				</ul>
		
			
	</div>
<a name="methodload_associations" id="load_associations"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">static method load_associations</span> (line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a154">154</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Loads specified associations and attaches them to parent objects.</p>
<p class="description"><p>Example: seat::load_associations($seats, $bookings)</p><p>This will endow each 'seat' object with the property bookings.  If a particular seat has no bookings, the property will be an empty array. In turn, each booking object  will be endowed with a property 'seat', containing a reference to the parent object.</p><p>The associations parameter can also be a nested array:</p><p>array('author' =&gt; array('book' =&gt; 'chapter'))</p><p>The association is recognized if your associated child objects contain a foreign key  which is named [model_name]_id. The model class for the child objects may also contain  a plural version of its name:</p><p><div class="src-code"><ol><li><div class="src-line">&nbsp;<span class="src-key">class&nbsp;</span><span class="src-id">mouse&nbsp;</span><span class="src-key">extends&nbsp;</span><a href="../Soda/model.html">model</a>&nbsp;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$plural&nbsp;</span>=&nbsp;<span class="src-str">'mice'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;...</span></div></li>
<li><div class="src-line">&nbsp;<span class="src-sym">}</span></div></li>
</ol></div></p><p>If you don't specify your own plural version, Soda will simply use an 's' postfix to pluralize.</p><p>Finally, if the $associations parameter contains a key which points to an object, the properties  of this object will be used to impose constraints on the retrieved associated objects. Technically,  the object's properties will be used to create an additional sql clause. Example:</p><p><div class="src-code"><ol><li><div class="src-line">&nbsp;<span class="src-var">$authors&nbsp;</span>=&nbsp;<span class="src-id">author</span><span class="src-sym">::</span><span class="src-id">load_all_by_publisher</span><span class="src-sym">(&nbsp;</span><span class="src-str">'Penguin'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$include&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'book'&nbsp;</span>=&gt;&nbsp;(object)&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'year'&nbsp;</span>=&gt;&nbsp;<span class="src-num">1972</span><span class="src-sym">))&nbsp;)</span><span class="src-sym">;</span></div></li>
</ol></div></p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">array</span>
		<span class="method-name">
			load_associations
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$objects</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$associations</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$objects</span><span class="var-description">: Parent objects to attach the associated models to</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$associations</span><span class="var-description">: Class names of the associated models to be loaded</span>			</li>
				</ul>
		
			
	</div>

<a name="method__construct" id="__construct"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">Constructor __construct</span> (line <span class="line-number"><a href="../__filesource/fsource_Soda__class.model.php.html#a68">68</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Instantiates model class with an array of property-value pairs.</p>
<p class="description"><p>Calls the define_validation_rules method to add validation rules.</p></p>
	
	<div class="method-signature">
		<span class="method-result">object</span>
		<span class="method-name">
			__construct
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$properties</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$properties</span><span class="var-description">: Properties and their values to populate the model with</span>			</li>
				</ul>
		
			
	</div>
						
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Thu, 12 Jan 2012 10:54:26 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>